"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},__rest=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},addIcon=function(e){return'<svg t="1697700092492" class="add-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="900" width="78" height="78"><path d="M560.064 149.952a48 48 0 0 0-96 0V464H150.016a48 48 0 0 0 0 96H464v313.984a48 48 0 0 0 96 0V560h314.048a48 48 0 0 0 0-96H560V149.952z" p-id="901" fill="#ffffff"></path></svg>')},reduceIcon=function(e){return'<svg t="1697700199963" class="reduce-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1256" width="78" height="78"><path d="M922.048 512a48 48 0 0 0-48-48H149.952a48 48 0 1 0 0 96h724.096a48 48 0 0 0 48-48z" p-id="1257" fill="#ffffff"></path></svg>')},closeIcon=function(e){return'<svg t="1690189203554" class="close-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2272" fill="currentColor"><path d="M504.224 470.288l207.84-207.84a16 16 0 0 1 22.608 0l11.328 11.328a16 16 0 0 1 0 22.624l-207.84 207.824 207.84 207.84a16 16 0 0 1 0 22.608l-11.328 11.328a16 16 0 0 1-22.624 0l-207.824-207.84-207.84 207.84a16 16 0 0 1-22.608 0l-11.328-11.328a16 16 0 0 1 0-22.624l207.84-207.824-207.84-207.84a16 16 0 0 1 0-22.608l11.328-11.328a16 16 0 0 1 22.624 0l207.824 207.84z" p-id="2273"></path></svg>')},oneToOneIcon=function(e){return'<svg t="1697700658302" class="one-to-one-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7084" width="78" height="78"><path d="M904.405333 149.333333v725.333334h-85.333333V250.346667l-66.24 33.152L714.666667 207.146667 830.336 149.333333h74.069333z m-608 0v725.333334h-85.333333V250.346667L144.853333 283.498667 106.666667 207.146667 222.336 149.333333h74.069333z m288 448v106.666667h-106.666666v-106.666667h106.666666z m0-277.333333v106.666667h-106.666666v-106.666667h106.666666z" fill="#ffffff" p-id="7085"></path></svg>')},flipRightIcon=function(e){return'<svg t="1697712563708" class="arrow-up-down-icon'.concat(e,'" viewBox="0 0 1088 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20575" width="78" height="78"><path d="M513.344 253.504V768H323.968l244.416 255.424L825.344 768H640V253.504h185.344L566.848 6.72 319.424 253.504h193.92z" fill="#ffffff" p-id="20576"></path></svg>')},flipLeftIcon=function(e){return'<svg t="1697712627137" class="arrow-left-right-icon'.concat(e,'" viewBox="0 0 1088 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21609" width="78" height="78"><path d="M320 576h516.224v183.296l246.4-244.48-246.4-256.832L832 448H320l-7.296-190.08L65.92 516.48l246.784 247.424L320 576z" fill="#ffffff" p-id="21610"></path></svg>')},rotateLeftIcon=function(e){return'<svg t="1697712701928" class="flip-left-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25120" width="78" height="78"><path d="M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H188V494h440v326z" p-id="25121" fill="#ffffff"></path><path d="M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-0.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7 0.4 12.6-6.1v-63.9c12.9 0.1 25.9 0.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-0.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3z" p-id="25122" fill="#ffffff"></path></svg>')},rotateRightIcon=function(e){return'<svg t="1697712744122" class="flip-right-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25323" width="78" height="78"><path d="M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-0.4-12.6 6.1l-0.2 64c-118.6 0.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-0.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z" p-id="25324" fill="#ffffff"></path><path d="M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32z m-44 402H396V494h440v326z" p-id="25325" fill="#ffffff"></path></svg>')},arrowLeftIcon=function(e){return'<svg t="1697787947316" class="arrow-left-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="900" width="78" height="78"><path d="M290.56 550.464a54.4 54.4 0 0 1 0-76.928l379.52-379.52a48 48 0 1 1 67.84 67.904L387.84 512l350.08 350.08a48 48 0 1 1-67.84 67.84L290.56 550.464z" p-id="901" fill="#ffffff"></path></svg>')},arrowRightIcon=function(e){return'<svg t="1697772815002" class="arrow-right-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="900" width="78" height="78"><path d="M733.44 550.464a54.4 54.4 0 0 0 0-76.928l-379.52-379.52A48 48 0 0 0 286.08 161.92L636.16 512l-350.08 350.08a48 48 0 1 0 67.84 67.84l379.52-379.456z" p-id="901" fill="#ffffff"></path></svg>')},resetIcon=function(e){return'<svg t="1697773227169" class="reset-icon'.concat(e,'" viewBox="0 0 1278 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2019" width="78" height="78"><path d="M1272.447024 472.907505l-150.052574 149.245613a32.021415 32.021415 0 0 1-44.681788 0L928.777033 472.906505c-17.717123-20.478986-5.895708-27.925618 6.45368-39.716035h136.525243A441.782135 441.782135 0 0 0 253.257466 304.732828L178.791151 275.257287a521.555187 521.555187 0 0 1 973.731808 157.934183h113.56338a26.653681 26.653681 0 0 1 6.360685 39.716035zM202.713967 440.946087l150.022575 149.556598a26.622682 26.622682 0 0 1-6.45468 39.717034H216.366292a442.247112 442.247112 0 0 0 789.701915 120.700026l75.213278 29.787526A521.555187 521.555187 0 0 1 134.513343 630.219719h-118.994111c-12.411386-11.791416-24.170804-19.238048-6.453681-39.717034l148.935629-149.556598a32.641385 32.641385 0 0 1 44.712787 0z" fill="#ffffff" p-id="2020"></path></svg>')},fullscreenIcon=function(e){return'<svg t="1697787617768" class="fullscreen-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3046" width="78" height="78"><path d="M213.333333 213.333333h213.333334V128H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v256h85.333333V213.333333zM170.666667 896h256v-85.333333H213.333333v-213.333334H128v256a42.666667 42.666667 0 0 0 42.666667 42.666667z m725.333333-42.666667v-256h-85.333333v213.333334h-213.333334v85.333333h256a42.666667 42.666667 0 0 0 42.666667-42.666667zM597.333333 213.333333h213.333334v213.333334h85.333333V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667h-256v85.333333z" fill="#ffffff" p-id="3047"></path></svg>')},playIcon=function(e){return'<svg t="1697800175999" class="play-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9820" width="78" height="78"><path d="M852.5 533.9L279 864.7c-11.9 6.9-27.2 2.8-34.1-9.1-2.2-3.8-3.3-8.1-3.3-12.5V181.5c0-13.8 11.2-24.9 24.9-24.9 4.4 0 8.7 1.2 12.5 3.3l573.4 330.8c11.9 6.9 16 22.1 9.1 34.1-2.1 3.8-5.2 6.9-9 9.1z" p-id="9821" fill="#ffffff"></path></svg>')},pauseIcon=function(e){return'<svg t="1697799289205" class="pause-icon'.concat(e,'" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8597" width="78" height="78"><path d="M209.645253 863.934444l201.049992 0 0-703.866842L209.645253 160.067602 209.645253 863.934444zM611.804588 863.934444l201.113437 0 0-703.866842L611.804588 160.067602 611.804588 863.934444z" p-id="8598" fill="#ffffff"></path></svg>')},ewViewerUtil=function(){function e(){}return e.prototype.checkContainer=function(e){if(this.isDom(e))return e;if(this.isString(e)){var t=this.$(e);if(t)return t}return document.body},e.prototype.isString=function(e){return"string"==typeof e},e.prototype.isNumber=function(e){return"number"==typeof e&&!Number.isNaN(e)},e.prototype.isObject=function(e){return e&&"object"==typeof e},e.prototype.isBoolean=function(e){return"boolean"==typeof e},e.prototype.isDom=function(e){return this.isObject(HTMLElement)?e instanceof HTMLElement:e&&this.isObject(e)&&1===e.nodeType&&this.isString(e.nodeName)||e instanceof HTMLCollection||e instanceof NodeList},e.prototype.handleTemplate=function(e,t){return this.isBoolean(e)&&e&&this.isString(t)&&t?t:""},e.prototype.on=function(e,t,n,i){void 0===i&&(i=!1),e&&t&&n&&e.addEventListener(t,n,i)},e.prototype.off=function(e,t,n,i){void 0===i&&(i=!1),e&&t&&n&&e.removeEventListener(t,n,i)},e.prototype.handleClassName=function(e,t){return(this.isBoolean(t)?t:this.isString(e)&&e)?" ".concat(e):""},e.prototype.addClass=function(e,t){return e.classList.add(t)},e.prototype.removeClass=function(e,t){return e.classList.remove(t)},e.prototype.warn=function(e){},e.prototype.assign=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(Object.assign)return Object.assign.apply(Object,__spreadArray([e],n,!1));if(null!==e){var o=Object(e);return n.forEach((function(e){if(t.isObject(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])})),o}},e.prototype.create=function(e){return document.createElement(e)},e.prototype.createElement=function(e){var t=this.create("div");return t.innerHTML=e,t.firstElementChild},e.prototype.$=function(e,t){return void 0===t&&(t=document),t.querySelector(e)},e.prototype.$$=function(e,t){return void 0===t&&(t=document),t.querySelectorAll(e)},e}(),ewViewer=function(e){function t(t){var n=e.call(this)||this;return n.$dom={},n.imageStyle=[],n.defaultConfig={container:document.body,isClickOutside:!0,previewMode:"bg",showCloseBtn:!0,showCloseBtnIcon:closeIcon(n.handleClassName("ew-viewer-close-icon")),closeTime:200,zoomOnWheeling:!0,autoSize:!0,minImageRatio:.1,maxImageRatio:1,showToolBar:!0,zoomInIcon:addIcon(n.handleClassName("ew-viewer-zoom-in-icon")),zoomOutIcon:reduceIcon(n.handleClassName("ew-viewer-zoom-out-icon")),oneToOneIcon:oneToOneIcon(n.handleClassName("ew-viewer-one-to-one-icon")),currentImageIndex:0,autoOpen:!1,flipLeftIcon:flipLeftIcon(n.handleClassName("ew-viewer-flip-left-icon")),flipRightIcon:flipRightIcon(n.handleClassName("ew-viewer-flip-right-icon")),rotateLeftIcon:rotateLeftIcon(n.handleClassName("ew-viewer-rotate-left-icon")),rotateRightIcon:rotateRightIcon(n.handleClassName("ew-viewer-rotate-right-icon")),resetIcon:resetIcon(n.handleClassName("ew-viewer-reset-icon")),prevIcon:arrowLeftIcon(n.handleClassName("ew-viewer-prev-icon")),nextIcon:arrowRightIcon(n.handleClassName("ew-viewer-next-icon")),fullscreenIcon:fullscreenIcon(n.handleClassName("ew-viewer-fullscreen-icon")),playIcon:playIcon(n.handleClassName("ew-viewer-play-icon")),pauseIcon:pauseIcon(n.handleClassName("ew-viewer-pause-icon")),minRotate:-1/0,maxRotate:1/0,loop:!0},n.config=Object.create(null),n.config=n.assign({},n.config,n.defaultConfig),n.imageDataList=[],n.currentImageIndex=n.config.currentImageIndex||0,n.wheeling=!1,n.isClickZoomIn=!1,n.isClickZoomOut=!1,n.isClickOneToOne=!1,n.fullScreenStatus=!1,n.isPlaying=!1,n.isPrev=!1,n.isNext=!1,n.timeout=null,n.options=t,n.computedImageRatio=Number(n.config.imageRatio)||.9,n.renderStyle(),n.init(t).then((function(e){e&&n.render()})),n}return __extends(t,e),t.prototype.update=function(){var e=this;this.options&&this.init(this.options).then((function(t){t&&e.render()}))},t.prototype.validateImgParam=function(e){var t=this;return new Promise((function(n){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(i){switch(i.label){case 0:return this.isString(e)?[4,this.validImage(e)]:[3,2];case 1:return i.sent()&&n(e),[3,5];case 2:return this.isDom(e)?(t=null==e?void 0:e.getAttribute("src"),[4,this.validImage(t)]):[3,4];case 3:return i.sent()&&n(t),[3,5];case 4:this.warn("[ewViewer warning]: The url or the img element src is not a valid img url!"),n(""),i.label=5;case 5:return[2]}}))}))}))},t.prototype.rangeRation=function(e){return!!this.isNumber(e)&&(!(e<0)&&!(e>1))},t.prototype.init=function(e){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(n){return[2,new Promise((function(n){return __awaiter(t,void 0,void 0,(function(){var t,i,o,r,a,s,c,l,h=this;return __generator(this,(function(u){switch(u.label){case 0:return this.isDom(e)||this.isString(e)?[4,this.validateImgParam(e)]:[3,2];case 1:return(l=u.sent())||n(!1),this.imageDataList=[l],n(!0),[3,8];case 2:return Array.isArray(e)?(Promise.all(e.map((function(e){return __awaiter(h,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.validateImgParam(e)];case 1:return[2,t.sent()]}}))}))}))).then((function(e){h.imageDataList=__spreadArray([],e,!0).filter(Boolean),0===h.imageDataList.length&&n(!1),n(!0)})),[3,8]):[3,3];case 3:return this.isObject(e)?(i=(t=e).img,o=__rest(t,["img"]),this.config=this.assign({},this.config,o),r=this.config,a=r.minImageRatio,s=r.maxImageRatio,this.rangeRation(a)||(this.config.minImageRatio=.1,this.warn("[ewViewer warning]: The minImageRatio should in bewteen 0 and 1!")),this.rangeRation(s)||(this.config.maxImageRatio=1,this.warn("[ewViewer warning]: The maxImageRatio should in bewteen 0 and 1!")),a>s&&this.warn("[ewViewer warning]: The minImageRatio should min the maxImageRatio!"),c=this.config.currentImageIndex,this.currentImageIndex!==c&&this.isNumber(c)&&c>=0&&c<=this.imageDataList.length-1&&(this.currentImageIndex=c),Array.isArray(i)?(Promise.all(i.map((function(e){return __awaiter(h,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.validateImgParam(e)];case 1:return[2,t.sent()]}}))}))}))).then((function(e){h.imageDataList=__spreadArray([],e,!0).filter(Boolean),0===h.imageDataList.length&&n(!1),n(!0)})),[3,6]):[3,4]):[3,7];case 4:return[4,this.validateImgParam(i)];case 5:(l=u.sent())||n(!1),this.imageDataList=[l],n(!0),u.label=6;case 6:return[3,8];case 7:this.warn("[ewViewer warning]: The options is not a valid params!"),n(!1),u.label=8;case 8:return[2]}}))}))}))]}))}))},t.prototype.validImage=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.isValidImage(e)];case 1:return t.sent()?[2,!0]:(this.warn("[ewViewer warning]: The options is not a valid img url string!"),[2,!1])}}))}))},t.prototype.isValidImage=function(e){return new Promise((function(t){var n=new Image;n.src=e,n.onload=function(){return t(!0)},n.onerror=function(){return t(!1)}}))},t.prototype.generateImageStyle=function(e){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(n){return e.forEach((function(e,n){var i=t.create("img");i.src=e,document.body.appendChild(i);var o=i.naturalWidth,r=i.naturalHeight;t.imageStyle.push({id:n,naturalWidth:o,naturalHeight:r,scaleWidth:0,scaleHeight:0,scaleX:0,scaleY:0,rotate:0}),document.body.removeChild(i)})),[2]}))}))},t.prototype.viewerStyle=function(){return"\n        .ew-viewer {\n            position: fixed;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            z-index: 2000;\n            transition: all 0.3s;\n        }\n        /* 显示 */\n        .ew-viewer.show {\n          transform: scale(1);\n          opacity: 1;\n        }\n        /* 隐藏 */\n        .ew-viewer.hidden {\n          transform: scale(0);\n          opacity: 0;\n        }\n        /* 遮罩层样式 */\n        .ew-viewer-mask {\n          position: fixed;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.5);\n          transition: all 0.6s;\n        }\n        .ew-viewer-img-box {\n            position: absolute;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            margin: auto;\n            opacity: 0;\n            visibility: hidden;\n            transition: all 0.3s;\n            will-change: width,height,opacity;\n        }\n        .ew-viewer-img-box.show {\n            visibility: visible;\n            opacity: 1;\n        }\n        .ew-viewer-img {\n            width: 100%;\n            height: 100%;\n        }\n        .ew-viewer-bg-img {\n            background-repeat: no-repeat;\n            background-position: center;\n            background-size: contain;\n            width: 100%;\n            height: 100%;\n            will-change: background-size;\n        }\n        .ew-viewer-close-btn {\n            width: 80px;\n            height: 80px;\n            position: absolute;\n            right: -40px;\n            top: -40px;\n            background: rgba(0,0,0,.5);\n            border-radius: 50%;\n            cursor: pointer;\n            color: #fff;\n            transition: all 0.1s;\n          }\n          .ew-viewer-close-btn > svg:hover {\n            opacity: 0.5;\n          }\n          .ew-viewer-close-btn > svg {\n             width: 20px;\n             height: 20px;\n             position: absolute;\n             left: 15px;\n             bottom: 15px;\n          }\n          .ew-viewer-tooltip-ratio {\n             border-radius: 10px;\n             background: rgba(0,0,0,.5);\n             color: #fff;\n             position: absolute;\n             left: 0;\n             right: 0;\n             top: 0;\n             bottom: 0;\n             margin: auto;\n             width: max-content;\n             text-align: center;\n             height: max-content;\n             line-height: max-content;\n             padding: 6px 10px;\n             transition: all 0.3s;\n          }\n          .ew-viewer-tooltip-ratio.show {\n            visibility: visible;\n            opacity: 1;\n          }\n          .ew-viewer-tooltip-ratio.hidden {\n            visibility: hidden;\n            opacity: 0;\n          }\n          .ew-viewer-content {\n            height: calc(100% - 110px);\n            position: relative;\n          }\n          .ew-viewer-footer {\n             position: absolute;\n             bottom: 0;\n             width: 100%;\n             text-align: center;\n          }\n          .ew-viewer-footer svg {\n            width: 12px;\n            height: 12px;\n          }\n          .ew-viewer-title {\n            color: #fff;\n            margin-bottom: 6px;\n          }\n          .ew-viewer-button {\n             display: flex;\n             justify-content: center;\n             align-items: center;\n             margin-bottom: 8px;\n          }\n          .ew-viewer-button > div {\n             border-radius: 50%;\n             background: rgba(0,0,0,.5);\n             width: 24px;\n             height: 24px;\n             cursor: pointer;\n             box-sizing: border-box;\n             line-height: 24px;\n          }\n          .ew-viewer-button > div + div {\n             margin-left: 4px;\n          }\n          .ew-viewer-button > div:hover {\n             opacity: .6;\n          }\n          .ew-viewer-thumb {\n            max-width: 100%;\n            height: 50px;\n            white-space: nowrap;\n            background-color: rgba(0,0,0,.5);\n            overflow-x: auto;\n            overflow-y: hidden;\n            padding: 0 2em;\n          }\n          .ew-viewer-thumb-img {\n             width: 50px;\n             height: 50px;\n             cursor: pointer;\n             opacity: .5;\n             object-fit: contain;\n             object-position: center;\n             background-color: rgba(255,255,255,.5);\n          }\n          .ew-viewer-thumb-img.active {\n            opacity: 1;\n          }\n          .ew-viewer-thumb-img:hover{\n             opacity: .5;\n          }\n          .ew-viewer-thumb-img + .ew-viewer-thumb-img {\n            margin-left: 4px;\n          }\n        "},t.prototype.renderStyle=function(){var e=this.create("style");e.id="ew-preview-img-style",e.textContent=this.viewerStyle();var t=this.$("head");this.$("#ew-preview-img-style",t)||null==t||t.appendChild(e)},t.prototype.scaleImageCallback=function(){var e=this.$dom,t=e.$viewerRatioTooltipElement,n=e.$viewerContentElement,i=this.imageStyle[this.currentImageIndex],o=i.naturalWidth,r=i.naturalHeight;if(n){var a=n.offsetWidth,s=n.offsetHeight,c=o/r,l=a,h=s;s*c>a?h=a/c:l=s*c,this.imageStyle[this.currentImageIndex].scaleWidth=Math.min(l*this.computedImageRatio,o),this.imageStyle[this.currentImageIndex].scaleHeight=Math.min(h*this.computedImageRatio,r),t&&(t.textContent="".concat(parseInt("".concat(100*this.computedImageRatio)),"%"))}},t.prototype.setImageStyle=function(e){return void 0===e&&(e=!0),__awaiter(this,void 0,void 0,(function(){var t,n,i,o,r,a,s,c,l,h,u,m,d=this;return __generator(this,(function(g){return e&&this.scaleImageCallback(),t=this.imageStyle[this.currentImageIndex],n=t.scaleWidth,i=t.scaleHeight,o=t.scaleX,r=t.scaleY,a=t.rotate,s=t.naturalWidth,c=t.naturalHeight,l=this.imageDataList[this.currentImageIndex],h=this.$dom,u=h.$viewerContentElement,m=h.$viewerTitleElement,u&&__spreadArray([],u.children,!0).forEach((function(e){var t=Number(e.getAttribute("data-index")),s=e.firstElementChild;t===d.currentImageIndex?(e.style.width=n+"px",e.style.height=i+"px","img"!==e.tagName.toLowerCase()&&(s.style.backgroundSize="".concat(n,"px ").concat(i,"px")),e.style.removeProperty("transform"),0===o&&0===r&&0===a||(e.style.transform="".concat(0!==a?"rotate(".concat(a,"deg)"):""," ").concat(0!==o?"scaleX(".concat(o,")"):""," ").concat(0!==r?"scaleY(".concat(r,")"):"")),setTimeout((function(){d.addClass(e,"show")}),0)):(e.style.removeProperty("width"),e.style.removeProperty("height"),"img"!==e.tagName.toLowerCase()&&s.style.removeProperty("background-size"),e.style.removeProperty("transform"),setTimeout((function(){d.removeClass(e,"show")}),0))})),m&&(m.innerHTML="".concat(this.getImageNameFromURL(l),"(").concat(s," x ").concat(c,")")),[2]}))}))},t.prototype.getImageNameFromURL=function(e){return this.isString(e)?decodeURIComponent(e.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""},t.prototype.render=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,r,a,s,c,l,h,u,m,d,g,w,v,f,p,I,y,b,x,_,C,S,$,L,T=this;return __generator(this,(function(E){switch(E.label){case 0:return e=this.config,t=e.container,n=e.autoOpen,i=e.previewMode,o=e.showCloseBtn,r=e.showCloseBtnIcon,a=e.showToolBar,s=e.zoomInIcon,c=e.zoomOutIcon,l=e.oneToOneIcon,h=e.flipLeftIcon,u=e.flipRightIcon,m=e.rotateLeftIcon,d=e.rotateRightIcon,g=e.resetIcon,w=e.prevIcon,v=e.nextIcon,f=e.fullscreenIcon,p=e.playIcon,I=e.pauseIcon,this.$dom.rootElement=this.checkContainer(t),[4,this.generateImageStyle(this.imageDataList)];case 1:return E.sent(),y=this.imageStyle[this.currentImageIndex],b=y.naturalWidth,x=y.naturalHeight,_=this.imageDataList[this.currentImageIndex],C='\n            <div class="ew-viewer-zoom-in">'.concat(s,'</div>\n            <div class="ew-viewer-zoom-out">').concat(c,'</div>\n            <div class="ew-viewer-one-to-one">').concat(l,'</div>\n            <div class="ew-viewer-reset">').concat(g,'</div>\n            <div class="ew-viewer-fullscreen">').concat(f,"</div>\n            ").concat(this.handleTemplate(this.imageDataList.length>1,'<div class="ew-viewer-prev">'.concat(w,"</div>")),"\n            ").concat(this.handleTemplate(this.imageDataList.length>1,'<div class="ew-viewer-play">'.concat(this.isPlaying?I:p,"</div>")),"\n            ").concat(this.handleTemplate(this.imageDataList.length>1,'<div class="ew-viewer-next">'.concat(v,"</div>")),'\n            <div class="ew-viewer-rotate-left">').concat(m,'</div>\n            <div class="ew-viewer-rotate-right">').concat(d,'</div>\n            <div class="ew-viewer-flip-horizontal">').concat(h,'</div>\n            <div class="ew-viewer-flip-vertical">').concat(u,"</div>\n        "),S=this.imageDataList.map((function(e,t){var n="background-image:url(".concat(e,");");return'<div class="ew-viewer-img-box'.concat(T.handleClassName(t===T.currentImageIndex?"show":""),'" data-index="').concat(t,'">\n                    ').concat("bg"===i?'<div class="ew-viewer-bg-img" style="'.concat(n,'"></div>'):'<img src="'.concat(e,'" class="ew-viewer-img" />'),"\n                    </div>")})).join(" "),$=this.imageDataList.map((function(e,t){return'<img src="'.concat(e,'" class="ew-viewer-thumb-img').concat(T.handleClassName(t===T.currentImageIndex?"active":""),'" data-index="').concat(t,'"/>')})).join(""),L=this.createElement('<div class="ew-viewer hidden">\n            <div class="ew-viewer-mask">\n            <div class="ew-viewer-content">'.concat(S,'</div>\n            <div class="ew-viewer-tooltip-ratio hidden">').concat(parseInt("".concat(100*this.computedImageRatio)),'%</div>\n            <div class="ew-viewer-footer">\n                <div class="ew-viewer-title">\n                    ').concat(this.getImageNameFromURL(_),"\n                    (").concat(b," x ").concat(x,")\n                </div>\n                ").concat(this.handleTemplate(a,'<div class="ew-viewer-button">'.concat(C,"</div>")),"\n                ").concat(this.handleTemplate(this.imageDataList.length>1,'<div class="ew-viewer-thumb">'.concat($,"</div>")),"\n            </div>\n            ").concat(this.handleTemplate(o,'<span class="ew-viewer-close-btn">'.concat(r,"</span>")),"\n            </div>\n            </div>\n        ")),this.$dom.$el=this.$(".ew-viewer",this.$dom.rootElement),this.$dom.$el?(this.$dom.rootElement.removeChild(this.$dom.$el),this.$dom.rootElement.appendChild(L)):this.$dom.rootElement.appendChild(L),[4,this.initDom()];case 2:return E.sent(),n&&this.open(),[4,this.bindEvent()];case 3:return E.sent(),[2]}}))}))},t.prototype.initDom=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this.$dom.$el=this.$(".ew-viewer",this.$dom.rootElement),this.$dom.$viewerContentElement=this.$(".ew-viewer-content",this.$dom.$el),this.$dom.$viewerRatioTooltipElement=this.$(".ew-viewer-tooltip-ratio",this.$dom.$el),this.$dom.$viewerToolbarElement=this.$(".ew-viewer-button",this.$dom.$el),this.$dom.$viewerThumbElement=this.$(".ew-viewer-thumb",this.$dom.$el),this.$dom.$viewerTitleElement=this.$(".ew-viewer-title",this.$dom.$el),[2]}))}))},t.prototype.computedImageRatioHandler=function(e){var t=this.config,n=t.minImageRatio,i=t.maxImageRatio,o=e?1:-1,r=this.computedImageRatio+o*(Math.floor(100*Math.random())/1e3);this.computedImageRatio=Math.max(n,Math.min(r,i))},t.prototype.onMouseWheelHandler=function(e){var t=this;e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),150),this.viewedImageHandler(e.deltaY<0))},t.prototype.viewedImageHandler=function(e){var t=this;this.isBoolean(e)?this.computedImageRatioHandler(e):this.computedImageRatio=e,this.toggleTooltip(!0),setTimeout((function(){t.toggleTooltip(!1)}),1e3),this.setImageStyle()},t.prototype.changeThumbImage=function(){var e=this,t=this.$dom.$viewerThumbElement;t&&__spreadArray([],t.children,!0).forEach((function(t){Number(t.getAttribute("data-index"))===e.currentImageIndex?e.addClass(t,"active"):e.removeClass(t,"active")}))},t.prototype.requestFullscreen=function(){var e,t=this.$dom.$viewerContentElement;if(t){var n=null===(e=this.$(".ew-viewer-img-box.show",t).firstElementChild)||void 0===e?void 0:e.ownerDocument;if(!(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)){var i=n.documentElement;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}}},t.prototype.exitFullscreen=function(){var e,t=this.$dom.$viewerContentElement;if(t){var n=null===(e=this.$(".ew-viewer-img-box.show",t).firstElementChild)||void 0===e?void 0:e.ownerDocument;(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)&&(n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen())}},t.prototype.resetImage=function(){this.computedImageRatio=Number(this.config.imageRatio)||.9,this.imageStyle[this.currentImageIndex].rotate=0,this.imageStyle[this.currentImageIndex].scaleX=0,this.imageStyle[this.currentImageIndex].scaleY=0,this.setImageStyle()},t.prototype.bindEvent=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,r,a,s,c,l,h=this;return __generator(this,(function(u){return e=this.$dom,t=e.$el,n=e.$viewerToolbarElement,i=e.$viewerThumbElement,t?(o=this.config,r=o.isClickOutside,a=o.zoomOnWheeling,s=o.autoSize,c=o.minRotate,l=o.maxRotate,this.on(t,"click",(function(e){var t,n,i=e.target;if(i){var o="svg"===(null==i?void 0:i.tagName.toLowerCase())?null==i?void 0:i.parentElement:"path"===(null==i?void 0:i.tagName.toLowerCase())?null===(t=i.parentElement)||void 0===t?void 0:t.parentElement:i,a=r&&["ew-viewer-mask","ew-viewer-content","ew-viewer-footer","ew-viewer-title","ew-viewer-button","ew-viewer-thumb"].some((function(e){return null==o?void 0:o.className.includes(e)}))||(null==o?void 0:o.className.includes("ew-viewer-close-btn"));(null===(n=null==o?void 0:o.className)||void 0===n?void 0:n.includes("ew-viewer-fullscreen"))||(h.fullScreenStatus?(h.exitFullscreen(),h.fullScreenStatus=!1):a&&h.close())}})),s&&this.on(window,"resize",(function(){return h.setImageStyle()})),a&&this.on(t,"wheel",this.onMouseWheelHandler.bind(this)),n&&this.on(n,"click",(function(e){var t,n=e.target;if(n){var i="svg"===(null==n?void 0:n.tagName.toLowerCase())?null==n?void 0:n.parentElement:"path"===(null==n?void 0:n.tagName.toLowerCase())?null===(t=n.parentElement)||void 0===t?void 0:t.parentElement:n,o=function(){h.currentImageIndex--,h.currentImageIndex<0&&(h.currentImageIndex=h.config.loop||h.isPlaying?h.imageDataList.length-1:0),h.changeThumbImage(),h.setImageStyle()},r=function(){h.currentImageIndex++,h.currentImageIndex>h.imageDataList.length-1&&(h.currentImageIndex=h.config.loop||h.isPlaying?0:h.imageDataList.length-1),h.changeThumbImage(),h.setImageStyle()},a=function(){h.timeout=setTimeout((function(){h.isPrev&&o(),h.isNext&&r(),a()}),Number(h.config.interval)||5e3)},s=function(e,t){h.timeout&&clearTimeout(h.timeout),h.isPrev=e,h.isNext=t,e&&o(),t&&r(),h.isPlaying&&setTimeout((function(){a()}),1e3)};switch(null==i?void 0:i.className){case"ew-viewer-zoom-in":if(h.isClickZoomIn)return;h.isClickZoomIn=!0,setTimeout((function(){h.isClickZoomIn=!1}),50),h.viewedImageHandler(!0);break;case"ew-viewer-zoom-out":if(h.isClickZoomOut)return;h.isClickZoomOut=!0,setTimeout((function(){h.isClickZoomOut=!1}),50),h.viewedImageHandler(!1);break;case"ew-viewer-one-to-one":if(h.isClickOneToOne)return;h.isClickOneToOne=!0,setTimeout((function(){h.isClickOneToOne=!1}),50);var u=1===h.computedImageRatio?.5:1;h.viewedImageHandler(u);break;case"ew-viewer-rotate-left":h.imageStyle[h.currentImageIndex].rotate-=90,h.isNumber(c)&&c!==-1/0&&h.imageStyle[h.currentImageIndex].rotate<=c&&(h.imageStyle[h.currentImageIndex].rotate=c),h.setImageStyle();break;case"ew-viewer-rotate-right":h.imageStyle[h.currentImageIndex].rotate+=90,h.isNumber(l)&&l!==1/0&&h.imageStyle[h.currentImageIndex].rotate>=l&&(h.imageStyle[h.currentImageIndex].rotate=l),h.setImageStyle();break;case"ew-viewer-flip-horizontal":h.imageStyle[h.currentImageIndex].scaleX-=1,-1!==h.imageStyle[h.currentImageIndex].scaleX&&(h.imageStyle[h.currentImageIndex].scaleX=0),h.setImageStyle();break;case"ew-viewer-flip-vertical":h.imageStyle[h.currentImageIndex].scaleY-=1,-1!==h.imageStyle[h.currentImageIndex].scaleY&&(h.imageStyle[h.currentImageIndex].scaleY=0),h.setImageStyle();break;case"ew-viewer-reset":h.resetImage();break;case"ew-viewer-prev":s(!0,!1);break;case"ew-viewer-next":s(!1,!0);break;case"ew-viewer-fullscreen":h.fullScreenStatus=!h.fullScreenStatus,h.fullScreenStatus?h.requestFullscreen():h.exitFullscreen();break;case"ew-viewer-play":h.isPlaying=!h.isPlaying;var m=h.config,d=m.playIcon,g=m.pauseIcon;d&&g&&i&&(i.innerHTML=h.isPlaying?g:d),h.isNext=!0,h.isPlaying?a():h.timeout&&clearTimeout(h.timeout);break}}})),i&&this.on(i,"click",(function(e){var t=e.target;e.stopPropagation(),t&&t.className.includes("ew-viewer-thumb-img")&&(h.currentImageIndex=Number(t.getAttribute("data-index")),h.changeThumbImage(),h.setImageStyle())})),[2]):[2]}))}))},t.prototype.toggleTooltip=function(e){var t=this,n=this.$dom.$viewerRatioTooltipElement;n&&setTimeout((function(){t.addClass(n,e?"show":"hidden"),t.removeClass(n,e?"hidden":"show")}),100)},t.prototype.baseToggle=function(e,t){var n=this,i=this.config.closeTime;setTimeout((function(){n.addClass(n.$dom.$el,e?"show":"hidden"),n.removeClass(n.$dom.$el,e?"hidden":"show")}),t||i)},t.prototype.close=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return this.resetImage(),this.baseToggle(!1,e),[2]}))}))},t.prototype.viewImage=function(e){this.isNumber(e)&&e>=0&&e<=this.imageDataList.length-1&&(this.currentImageIndex=e),this.open()},t.prototype.open=function(e){this.changeThumbImage(),this.setImageStyle(),this.baseToggle(!0,e)},t.prototype.destroy=function(){var e;null===(e=this.$dom.$el)||void 0===e||e.remove()},t}(ewViewerUtil);